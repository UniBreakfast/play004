<!DOCTYPE html>
<head>
  <meta charset="UTF-8">

  <style>
    * { margin:0;  padding:0;  box-sizing:border-box }
    body {
      height: 100vh;
      font: 1rem sans-serif;
      padding: 15px;
    }
    .ubInput {
      margin: 10px;
    }
    .hintBox {
      background: yellow;
    }
  </style>

  <title> Fields </title>

</head>
<body>

  <h1> Field development test grounds </h1>
  <div style=display:flex;margin:auto;height:80%>
    <div style=margin:auto;display:flex;flex-direction:column>

      <span class=ubInput id=labelTop>
        <label for=inp1>Label:</label><br>
        <input id=inp1>
      </span>
      <button id=btn1> check inp1 </button>

      <span class=ubInput id=labelLeft>
        <label for=inp2>Label:</label>
        <input id=inp2>
      </span>
      <button id=btn2> check inp2 </button>

      <span class=ubInput id=labelLess>
        <input id=inp3 placeholder=label>
      </span>
      <button id=btn3> check inp3 </button>

      <script src=play004/MODULES/DOMfunctions/hintBox.js></script>
      <script>


        function makeVal(valCase, hint) {
          return function() {
            if ((new RegExp(({
              'login3to32': '^\\w{3,32}$',
              'email': '^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]'+
              '\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]'+
              '{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$',
              'startConf': '^[2-9]$|^10$'
            })[valCase])).test(this.value)) {
              hintBoxR(this)
              return this.value
            } else hintBoxR(this, hint)
          }
        }

        const inpVal = inp=> inp.val? inp.val() : inp.value

        const inpVal2Btn = (inp,btn,val)=> {
          val=inpVal(inp)
          btn.innerText = btn.innerText.trim().split(':')[0]+(val? ': '+val:'')
        }

        inp1.val = makeVal('login3to32', 'Login should be 3-32 characters long, no spaces or punctuation, only latin letters, numbers and _.')
        inp2.val = makeVal('email', 'That doesn\'t look like a valid E-mail. Try again.')
        inp3.val = makeVal('startConf', 'Only an integer from 2 to 10.')

        btn1.onclick =()=> inpVal2Btn(inp1,btn1)
        btn2.onclick =()=> inpVal2Btn(inp2,btn2)
        btn3.onclick =()=> inpVal2Btn(inp3,btn3)


        function makeInp(el, num, label, cls) {
          const inpGr = document.createElement('span'),
                lbl = document.createElement('label'),
                inp = document.createElement('input')
          inpGr.id = 'inpGr'+num
          inp.id = 'inp'+num
          lbl.id = 'lbl'+num
          lbl.setAttribute('for', 'inp'+num)
          lbl.innerText = label
          inpGr.classList.add('inpGr')
          if (cls) inpGr.classList.add(cls)
          inpGr.append(lbl, inp)
          el.append(inpGr)
          inp.val = makeVal('email', 'That doesn\'t look like a valid E-mail. Try again.')
          btn3.onclick =()=> inpVal2Btn(inp,btn3)



        }
        makeInp(labelTop.parentNode, 4, 'Pa:', 'ubInput')


      </script>

    </div>
  </div>

</body>
</html>